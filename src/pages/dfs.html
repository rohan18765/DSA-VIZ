<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DFS Visualization - DSA VIZ</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: "Inter", sans-serif; }
  </style>
</head>

<body class="bg-slate-50 text-slate-800 flex flex-col h-screen">

<header class="bg-white border-b shadow-sm">
  <div class="container mx-auto px-4 md:px-6 py-3 flex justify-between items-center">
    <a href="../index.html" class="flex items-center gap-2 group">
      <div class="bg-slate-900 text-white p-1.5 rounded-lg group-hover:bg-slate-700 transition">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
      </div>
      <span class="text-base md:text-lg font-semibold text-slate-800 group-hover:text-slate-900 transition">
        Back
      </span>
    </a>

    <h1 class="text-lg md:text-xl font-bold text-slate-900 text-right">
      Depth-First Search (DFS)
    </h1>
  </div>
</header>

<!-- üëá mobile: column | desktop: row -->
<main class="flex-1 flex flex-col md:flex-row overflow-hidden">

  <!-- Canvas -->
  <div id="canvas-container"
       onclick="handleCanvasClick(event)"
       class="flex-1 bg-slate-100 relative overflow-hidden cursor-crosshair">

    <div id="instructions"
         class="absolute top-4 md:top-6 left-1/2 -translate-x-1/2
                bg-white/90 backdrop-blur px-3 md:px-4 py-1.5 md:py-2
                rounded-full shadow text-xs md:text-sm text-slate-600 z-30">
      Click to add nodes. Select ‚ÄúConnect‚Äù to link them.
    </div>

    <svg id="edge-svg" class="absolute inset-0 w-full h-full pointer-events-none"></svg>
    <div id="node-layer" class="absolute inset-0 pointer-events-none"></div>
  </div>

  <!-- Sidebar -->
  <aside
    class="w-full md:w-[28rem] lg:w-[32rem] xl:w-[36rem]
           bg-white flex flex-col border-t md:border-t-0 md:border-l">

    <!-- Controls -->
    <div class="p-4 md:p-6 space-y-6 border-b flex-1 overflow-y-auto">

      <!-- Traversal -->
      <section>
        <h3 class="text-xs font-bold uppercase text-slate-700 mb-2">Traversal Path</h3>
        <div id="traversal-output"
             class="w-full p-3 bg-slate-50 border rounded-lg min-h-[48px]
                    flex flex-wrap gap-1 text-sm font-mono">
          <span class="text-slate-500 italic">Ready‚Ä¶</span>
        </div>
      </section>

      <!-- Stack -->
      <section>
        <h3 class="text-xs font-bold uppercase text-slate-700 mb-2">Recursion Stack</h3>

        <div class="flex justify-between text-[10px] text-slate-600 font-semibold mb-1 px-1">
          <span>Top (Next)</span>
          <span>Bottom</span>
        </div>

        <div id="stack-display"
             class="w-full h-44 bg-slate-50 border rounded-lg
                    flex flex-col-reverse items-center p-2 gap-2 overflow-y-auto relative">
          <span class="text-xs text-slate-600 italic absolute top-1/2 -translate-y-1/2">
            Stack Empty
          </span>
        </div>
      </section>

      <!-- Builder -->
      <section class="pt-2 border-t">
        <h3 class="text-xs font-bold uppercase text-slate-600 mb-3">Builder Tools</h3>

        <div class="flex gap-2 flex-wrap mb-4">
          <button id="btn-node"
                  onclick="setMode('node')"
                  class="flex-1 bg-slate-900 text-white py-2 rounded-lg text-sm font-medium shadow">
            + Add Node
          </button>

          <button id="btn-edge"
                  onclick="setMode('edge')"
                  class="flex-1 bg-white border py-2 rounded-lg text-sm hover:bg-slate-50">
            Connect Edge
          </button>
        </div>

        <h3 class="text-xs font-bold uppercase text-slate-600 mb-3">Algorithm</h3>

        <div class="flex gap-2 flex-wrap mb-4">
          <input id="start-node"
                 type="number"
                 placeholder="Start ID"
                 class="w-28 px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-slate-900 outline-none">

          <button onclick="startDFS()"
                  class="flex-1 bg-indigo-600 text-white py-2 rounded-lg text-sm font-semibold hover:bg-indigo-700 transition">
            Run DFS
          </button>
        </div>

        <div class="flex justify-between mb-1">
          <label class="text-xs font-semibold text-slate-500 uppercase">Speed</label>
          <span class="text-xs text-slate-500" id="speed-label">Normal</span>
        </div>

        <input id="speed-slider" type="range" min="1" max="5" value="3"
               class="w-full h-2 bg-slate-200 rounded-lg accent-indigo-600 cursor-pointer">

        <button onclick="clearGraph()"
                class="w-full mt-6 text-sm md:text-base text-red-600 hover:text-red-900 underline">
          Clear Graph
        </button>
      </section>

    </div>

    <!-- Log -->
    <div class="h-44 p-4 md:p-6 bg-slate-50 border-t overflow-y-auto">
      <h3 class="text-xs font-bold uppercase text-slate-500 mb-3">Event Log</h3>

      <div id="log-container" class="space-y-2 text-sm font-mono">
        <div class="p-2 bg-white border rounded">
          Graph ready.
        </div>
      </div>
    </div>

  </aside>

</main>

<script src="../algorithms/graphs/dfs.js"></script>

<script>
  const speed = document.getElementById("speed-slider");
  const label = document.getElementById("speed-label");
  const map = {1: "Very Slow", 2: "Slow", 3: "Normal", 4: "Fast", 5: "Very Fast"};
  speed?.addEventListener("input", () => label.textContent = map[speed.value]);
</script>

</body>
</html>
